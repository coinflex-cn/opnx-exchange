# REST API

**TEST** site

* `https://v2stgapi.coinflex.com`

**LIVE** site

* `https://v2api.coinflex.com/v2`

For clients who do not wish to take advantage of CoinFLEX's native WebSocket API, CoinFLEX offers a RESTful API that implements much of the same functionality.

##Authentication 

> **Request**

```json
{
  "Content-Type": "application/json",
  "AccessKey": "<string>",
  "Timestamp": "<string>", 
  "Signature": "<string>", 
  "Nonce": "<string>"
}
```

### GET `v2/borrowingSummary`

Get borrowing summary.

> **Request**

```json
GET v2/borrowingSummary
```

> **SUCCESSFUL RESPONSE**

```json
{
    "event": "borrowingSummary",
    "timestamp": "1626433981644",
    "accountId": "3123",
    "data": [
        {
            "borrowAsset": "USD",
            "borrowedAmount": "109031.8252978",
            "collateralAsset": "BTC",
            "collateralizedAmount": "3.65800000",
            "rateType": "FLOATING_RATE",
            "status": "To be repaid"
        },
        ...
    ]
}
```

Response Fields | Type | Description |
----------------| ---- | ----------- |
accountId | STRING | Account ID |
borrowAsset | STRING | Borrow asset, can only be `USD` for now |
borrowedAmount | STRING | Total borrowed amount of the borrow asset |
collateralAsset | STRING | Collateral asset |
collateralizedAmount | STRING | Total collateralized amount of the collateral asset |
rateType | STRING | `FLOATING_RATE` or `FIXED_RATE` |
status | STRING | `To be repaid` |

### POST `/v2/borrow/close`

Close borrow.

> **Request**

```json
POST /v2/borrow/close

{
    "marketCode": "BTC-USD-SWAP-LIN",
    "price": "29633.5",
    "quantity": "1"
}
```

> **SUCCESSFUL RESPONSE**

```json
{
    "event": "closeBorrow",
    "timestamp": "1626434069478",
    "accountId": "3123",
    "data": {
        "success": "true",
        "timestamp": "1626434069461",
        "clientOrderId": "1626434069478",
        "orderId": "1000018496331",
        "price": "29633.5",
        "quantity": "1.0",
        "side": "SELL",
        "status": "CANCELED_BY_FOK",
        "marketCode": "BTC-USD-SWAP-LIN",
        "timeInForce": "FOK",
        "notice": "OrderClosed",
        "orderType": "MARKET",
        "isTriggered": "false"
    }
}
```

Request Parameters | Type | Required | Description |
------------------ | ---- | -------- | ----------- |
marketCode | STRING | YES | Borrow asset, can only be `USD` for now |
price | STRING | NO | The price to close the borrow, default is the market price |
collateralAmount | STRING | NO | The quantity to close the borrow, default is full position |

Response Fields | Type | Description |
----------------| ---- | ----------- |
accountId | STRING | Account ID |
clientOrderId | STRING | Client assigned ID to help manage and identify orders with max value `9223372036854775807` |
orderId | STRING | Order ID which generated by the server |
price | STRING | Price submitted |
quantity | STRING | Quantity submitted |
side | STRING | Side of the order, `BUY` or `SELL` |
status | STRING | Status of the order |
marketCode | STRING | Market code |
timeInForce | STRING | Time in force |
notice | STRING | `OrderClosed` or `OrderMatched` or `OrderOpend` |
orderType | STRING | Type of the order, `LIMIT` or `STOP` |
isTriggered | STRING | `true`(for stop order) or `false` |
